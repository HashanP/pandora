<head>
  <title>pandora</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<template name="base">
	<div class="page-wrapper">
		<nav class="sidebar">
			<ul class="sidebar-nav">
				<li class="header">Subjects</li>
				{{#each subjects}}
					<li><a href="/rooms/{{_id}}">{{title}}</a></li>
				{{/each}}
				{{#if admin}}
					<li class="header">Admin</li>
					<li><a href="/admin/users">Users</a></li>
					<li><a href="/admin/rooms">Rooms</a></li>
					<li><a href="/admin/billing">Billing</a></li>
				{{/if}}
			</ul>
		</nav>
		<div class="contents">
			{{> yield}}
		</div>
	</div>
</template>

<template name="/admin/users">
	<div class="row">
		<div class="col-md-4 col-lg-3">
			<input type="text" class="form-control search" placeholder="Search...">
		</div>
		<div class="col-md-8 col-lg-9">
			<div class="pull-right">
				<a href="/admin/users/create" class="btn btn-success"><i class="fa fa-plus"></i> Add</a>
				<a href="/admin/users/massUserCreation" class="btn btn-success"><i class="fa fa-users"></i> Mass User Creation</a>	
			</div>
		</div>
	</div>
	<br>
	<div class="row">
		<div class="col-md-12">	
			<div class="panel panel-default users">
				<div class="panel-heading">
					<h3 class="panel-title">
						<span class="panel-sup">Users</span>
						<div class="pull-right">
							<a class="btn btn-link active">All Users ({{count}})</a>
							<a class="btn btn-link">Disabled Users (3)</a>
							<a class="btn btn-link">Recently Deleted (0)</a>
						</div>
					</h3>
				</div>
				<ul class="list-group">
					{{#each users}}
						<li class="list-group-item">
							{{username}}
							{{#if isAdmin}}
								<span class="label label-info">Admin</span>
							{{/if}}
							<div class="pull-right">
								<a href="/admin/users/{{_id}}/edit" class="btn btn-edit btn-xs"><i class="fa fa-pencil"></i> Edit</a>
								<button class="btn btn-xs btn-danger del"><i class="fa fa-trash-o"></i> Delete</button>
							</div>
						</li>
					{{/each}}	
				</ul>
			</div>
			{{> pagination route="users"}}
		</div>
	</div>
</template>

<template name="pagination">
	<nav class="text-center">
		<ul class="pagination">
			<li class="{{firstPage}}">
				<a href="/admin/{{route}}?page={{prevPage}}" class="prev" aria-label="Previous">
					<span aria-hidden="true">&laquo;</span>
				</a>
			</li>
			{{#each pages}}
				{{#if isPage .}}
					<li class="active"><a href="/admin/{{../route}}?page={{.}}">{{.}}</a></li>
				{{else}}
					<li><a href="/admin/{{../route}}?page={{.}}">{{.}}</a></li>
				{{/if}}
			{{/each}}
			<li class="{{lastPage}}">
				<a href="/admin/{{route}}?page={{nextPage}}" class="next" aria-label="Next">
					<span aria-hidden="true">&raquo;</span>
				</a>
			</li>
		</ul>
	</nav>
</template>
	
<template name="/admin/rooms">
	<div class="row">
		<div class="col-md-4 col-lg-3">
			<input type="text" class="form-control search" placeholder="Search...">
		</div>
		<div class="col-md-8 col-lg-9">
			<div class="pull-right">
				<a class="btn btn-success" href="/admin/rooms/create"><i class="fa fa-plus"></i> Add</a>
			</div>	
		</div>
	</div>	
	<br>
	<div class="row">
		<div class="col-md-12">
			<div class="panel panel-default users">
				<div class="panel-heading">
					<h3 class="panel-title">
						<span class="panel-sup">Rooms</span>
						<div class="pull-right">
							<a href="#" class="btn btn-link active">All Rooms ({{count}})</a>
							<a href="#" class="btn btn-link">Disabled Rooms (3)</a>
							<a href="#" class="btn btn-link">Recently Deleted (0)</a>
						</div>
					</h3>
				</div>
				<ul class="list-group">
					{{#each rooms}}
						<li class="list-group-item">
							{{title}}
							<div class="pull-right">
								<a class="btn btn-xs btn-edit" href="/admin/rooms/{{_id}}/edit"><i class="fa fa-pencil"></i> Edit</a>
								<button class="btn btn-xs btn-danger del"><i class="fa fa-trash-o"></i> Delete</button>
							</div>
						</li>
					{{/each}}
				</ul>
			</div>
			{{> pagination route="rooms"}}
		</div>
	</div>
</template>

<template name="/admin/users/create">
	<div class="row">
		<div class="col-md-12">
			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">
						{{#if _id}}Edit{{else}}Create{{/if}} User
						<div class="pull-right">
							<a href="/admin/users"><i class="fa fa-times"></i></a>
						</div>
					</h3>
				</div>
				<div class="panel-body">
					<form>
						<div class="form-group">
							<label>Username</label>
							<input type="text" value="{{username}}" class="username form-control">
						</div>
						{{#if not _id}}
							<div class="form-group">
								<label>Initial Password</label>
								<div class="radio">
									<label>
										<input type="radio" name="howToChoosePassword" class="howToChoosePassword" value="username" checked>
										Same as username
									</label>
								</div>
								<div class="radio">
									<label>
										<input type="radio" name="howToChoosePassword" class="howToChoosePassword" value="dateOfBirth">
										Date of birth (DD/MM/YYYY)
									</label>
								</div>
								<div class="radio">
									<label>
										<input type="radio" name="howToChoosePassword" class="howToChoosePassword" value="custom">
										Custom
									</label>
								</div>
							</div>	
							{{#if eq howToChoosePassword "dateOfBirth"}}
								<div class="form-group">	
									<label>Date of birth</label>
									<input type="date" class="dataOfBirth form-control">
								</div>
							{{/if}}	
							{{#if eq howToChoosePassword "custom"}}
								<div class="form-group">
									<label>Custom Password</label>
									<input type="text" class="password form-control">
								</div>
							{{/if}}
						{{/if}}
						<div class="form-group">
							<label>Rooms with read access</label>
							<input type="hidden" class="subjects-read form-control">
						</div>
						<div class="form-group">
							<label>Rooms with write access</label>
							<input type="hidden" class="subjects-write form-control">
						</div>
						<button type="button" class="btn btn-success create">Submit</button>
					</form>
				</div>
			</div>
		</div>
	</div>
</template>

<template name="/admin/rooms/create">
	<div class="row">
		<div class="col-md-12">
			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">
						{{#if _id}}Edit{{else}}Create{{/if}} Room
						<div class="pull-right">
							<a href="/admin/rooms"><i class="fa fa-times"></i></a>
						</div>
					</h3>
				</div>
				<div class="panel-body">
					<form>
						<div class="form-group">
							<label>Title</label>
							<input type="text" value="{{title}}" class="form-control title">
						</div>
						<div class="form-group">
							<label>Type</label>
							<select class="type form-control">
								<option value="subject" selected>Subject</option>
								<option value="club">Club</option>
								<option value="other">Other</option>
							</select>
						</div>
						<div class="form-group">
							<label>Students</label>
							<input type="hidden" class="students form-control">
						</div>
						<div class="form-group">
							<label>Teachers</label>
							<input type="hidden" class="teachers form-control">
						</div>
						<button type="submit" class="btn btn-primary">Submit</button>
					</form>
				</div>
			</div>
		</div>
	</div>
</template>

<template name="notices">
	<div class="row">
		<div class="col-md-12">
			<ul class="nav nav-tabs">
				<li role="presentation" class="active"><a href="/rooms/{{_id}}/notices">Notices</a></li>
				<li role="presentation"><a href="/rooms/{{_id}}/files">Resources</a></li>	
				<li role="presentation"><a href="#">Gradebook</a></li>
				<li role="presentation"><a href="#">Students</a></li>
			</ul>
		</div>
	</div>
	<div class="row">
		<div class="col-md-12">
			<div class="dropdown pull-right">
				<button class="btn btn-success dropdown-toggle" data-toggle="dropdown"><i class="fa fa-plus"></i> Add <span class="caret"></span></button>
				<ul class="dropdown-menu">
					<li><a href="/rooms/{{_id}}/notices/create/post">Post</a></li>
					<li><a href="/rooms/{{_id}}/notices/create/poll">Poll</a></li>
					<li><a href="#">Survey</a></li>
				</ul>
			</div>
				<br><br><br>
				{{#if notices}}
					<div class="list-group">
					{{#each notices}}
							<a href="/rooms/{{../_id}}/notices/{{_id}}" class="list-group-item">
								<h4 class="list-group-item-heading">{{title}}</h4>
								<p class="list-group-item-text">{{britishDate dateCreated}}</p>
							</a>
					{{/each}}
					</div>
				{{else}}

			<div class="fixed">
				<div class="jumbotron">
					<h2 class="text-center"><i class="fa fa-exclamation-circle fa-2x"></i></h2>
					<p class="text-center"><strong>There isn't anything here yet.</strong></p>
					<p>
						<ul>
							<li>To add a notice, click on the add button. You can also add a class poll or a survey.</li>
							<li>To upload a file for your students to access go to resources and click <i>Add</i></li>
							<li>To create a quiz, vocabulary quiz or crossword go to resources and click <i>Add</i> from there.</li>
							<li>To add students' grades to a database go to <i>Gradebook</i></li>
							<li><i>Gradebook</i> also displays students' grades collated from quizzes you have set them.</li>
							<li>To get a list of all the students in your class, go to <i>Students</i></li>
							<li>From here, you can print out a class register.</li>
							<li>There is also a random name generator that lets you randomly select a student.</li>
						</ul>
					</p>
				</div>
			</div>
				{{/if}}
		</div>	
	</div>
</template>

<template name="post">
	<div class="row">
		<div class="col-md-12">
			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">
						Notices
						<div class="pull-right">
							<a href="/rooms/{{room._id}}/notices"><i class="fa fa-times"></i></a>
						</div>
					</h3>
				</div>
				<div class="panel-body">
					<h2>{{post.title}}</h2>
					<p>{{{post.content}}}</p>
				</div>
			</div>
		</div>
	</div>
</template>

<template name="files">
	<div class="row">
		<div class="col-lg-3 col-md-4">
			<input type="text" placeholder="Search..." class="form-control">
		</div>
		<div class="col-lg-9 col-md-8">
			<div class="pull-right">
				<button class="btn btn-success upload"><i class="fa fa-upload"></i> Upload</button>
				<button class="btn btn-success create-folder"><i class="fa fa-folder-o"></i> New Folder</button>
			</div>
		</div>
		<br><br><br>
		{{#if filesBeingUploaded}}
		<div class="col-md-12">
			<div class="well file-uploads">
				{{#each filesBeingUploaded}}
					{{#with FS.GetFile "files" this}}
						<h4>{{this.name}}</h4>
						{{> FS.UploadProgressBar bootstrap=true class="progress-bar-success progress-bar-striped active" showPercent=true}}					
					{{/with}}
				{{/each}}
				{{#if finished}}
					<button class="btn btn-primary done">Done</button>
				{{/if}}
			</div>
		</div>
		{{/if}}
		<div class="col-md-12">
			<div class="panel panel-default files">
				<div class="panel-heading">
					<ol class="breadcrumb">
						{{#each pathSplit}}
							{{#if active}}
								<li class="active">{{name}}</li>
							{{else}}
								<li><a href="/rooms/{{../_id}}/files{{p}}">{{name}}</a></li>
							{{/if}}
						{{/each}}
					</ol>
				</div>
				
			<table class="table files">
				<!--<thead>
					<tr>
						<th>Filename</th>
						<th>File Size</th>
						<th></th>
					</tr>
				</thead>-->
				<tbody>
				{{#each files}}
						{{#if isFolder}}
							<tr class="folder">
								{{#if isActive name}}
								<td class="bb">
									<i class="fa fa-2x fa-folder-o"></i>
									<input type="text" class="form-control input-rename-folder">
								</td>
								{{else}}
								<td>
									<i class="fa fa-2x fa-folder-o"></i>
									<span class="filename"><a href="/rooms/{{../_id}}/files{{path}}{{name}}">{{name}}</a></span>
								</td>
								{{/if}}
								<td></td>
								<td>
									<div class="pull-right">
										<button class="btn btn-edit btn-sm rename-folder">Rename</button>
										<button class="btn btn-danger btn-sm del"><i class="fa fa-trash-o"></i> Delete</button>	
									</div>
								</td>
							</tr>
						{{else}}
							{{#with FS.GetFile "files" _id}}
								<tr>
								{{#if isActive _id}}
								<td class="bb">
									{{#if isImage}}
										<i class="fa fa-2x fa-file-image-o"></i>
									{{else}}
										<i class="fa fa-2x fa-file-o"></i>
									{{/if}}	
									<input type="text" class="form-control input-rename">
								</td>
								{{else}}			
									<td>
									{{#if isImage}}
											<i class="fa fa-2x fa-file-image-o"></i>
									{{else}}
											<i class="fa fa-2x fa-file-o"></i>
									{{/if}}
									<span class="filename">
										<a href="{{this.url}}" target="_blank">{{this.name}}</a>
									</span>
									</td>
								{{/if}}
									<td><span class="filesize">{{humanFileSize this.size}}</span></td>
									<td>
										<div class="pull-right">
											<button class="btn btn-edit btn-sm rename">Rename</button>
											{{#FS.DeleteButton class="btn btn-danger btn-sm"}}<i class="fa fa-trash-o"></i> Delete{{/FS.DeleteButton}}
										</div>
									</td>
								</tr>
							{{/with}}
						{{/if}}
					{{/each}}
					{{#if newFolder}}
					<tr class="create-new-folder">
						<td>
								<i class="fa fa-2x fa-folder-o"></i> 
								<input type="text" placeholder="Enter folder name" class="pull-right input-create-folder form-control">
						</td>
						<td></td>
						<td>
								</td>
					</tr>
					{{/if}}
				</tbody>
			</table>
			</div>
		</div>
	</div>
</template>	

<template name="/notices/create/post">
	<div class="row">
		<div class="col-md-12">
			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">
						Create Post
						<div class="pull-right">
							<a href="/rooms/{{_id}}/notices"><i class="fa fa-times"></i></a>
						</div>
					</h3>
				</div>
				<div class="panel-body">
					<form>
						<div class="form-group">
							<input placeholder="Title" type="text" class="form-control title">
						</div>
						<div class="form-group">
							<div id="summernote"></div>
						</div>
						<button type="submit" class="btn btn-success">Submit</button>
					</form>
				</div>
			</div>
		</div>
	</div>
</template>

<template name="/notices/create/poll">
	<div class="row">
		<div class="col-md-12">
			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">
						Create Poll
						<div class="pull-right">
							<a href="/rooms/{{_id}}/notices"><i class="fa fa-times"></i></a>
						</div>
					</h3>
				</div>
				<div class="panel-body">
					<form>
						<div class="form-group">
							<label>Title</label>
							<input type="text" class="form-control">
						</div>
						<div class="form-group">
							<label>Options</label>
							<br>
							<button class="btn btn-default btn-xs">Add Option</button>
							<br><br>
							<div class="input-group">
								<span class="input-group-addon">1. </span>
								<input type="text" class="form-control">
								<span class="input-group-btn">
									<button class="btn btn-default"><i class="fa fa-times"></i></button>
								</span>
							</div>
						</div>
						<button type="submit" class="btn btn-primary">Submit</button>
					</form>
				</div>
			</div>
		</div>
	</div>
</template>
			
<template name="login">
	<nav class="navbar navbar-inverse navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="#">Pandora</a>
			</div>
			<div class="navbar-collapse collapse">
				<ul class="nav navbar-nav navbar-right">
					<li><a href="#">About</a></li>
				</ul>
			</div>
		</div>
	</nav>
	<div class="row">
		<div class="col-md-4 col-sm-12 col-md-push-4">
			<div class="well login-container">
        <h2 class="text-center school-title">Westcliff High School for Boys</h2>
        <p class="text-center login-info">
          Enter your <b>username</b> and <b>password</b>.
        </p>
        <br>
				<form>
					<div class="form-group">
						<input type="text" placeholder="Username" class="username form-control input-lg">
					</div>
					<div class="form-group">
						<input type="password" placeholder="Password" class="password form-control input-lg">
					</div>
					<button type="submit" class="btn btn-success btn-block btn-lg login-button">
            <i class="fa fa-lock"></i>
            Login
          </button>
				</form>
			</div>
		</div>
	</div>
</template>
