<head>
  <title>Pandora 3.0</title>
  <link href="//maxcdn.bootstrapcdn.com/bootswatch/3.3.1/sandstone/bootstrap.min.css" rel="stylesheet">
  <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>

<body>
</body>

<template name="login">
    <div class="site-wrapper">
    <div class="site-wrapper-inner">

      <div class="cover-container">

        <div class="masthead clearfix">
          <div class="inner">
            <h3 class="masthead-brand">Pandora 3.0</h3>
            <nav>

              <ul class="nav additional-nav">
                {{> loginButtons}}
              </ul>
            </nav>
          </div>
        </div>

        <div class="inner cover">
          <img src="/box.png">
          <h1 class="cover-heading">The world's most advanced VLE</h1>
          <p class="lead">Harder, Better, Faster, Stronger</p>
        </div>

        <div class="mastfoot">
          <div class="inner">
            <p>Built by yours truly, <a class="bright" href="hashanp.github.io">Hashan Punchihewa</a></p>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<template name="subjects">
  <div class="main">
    {{> navbar}}

    <main class="container-fluid">
      <div class="grid block-grid-xl-8 block-grid-lg-8 block-grid-sm-4 block-grid-xs-2">
        {{#each courses}}
        <div class="block-grid-item icon">
          <a href="/courses/{{_id}}/blog">
            <img src="/icons/{{icon}}.png" alt="{{icon}}">
          </a>
        </div>
        {{/each}}
      </div>
    </main>
  </div>
</template>

<template name="blog_list">
  <div class="list-group">
    {{#each i posts}}
    <a href="/courses/{{../_id}}/blog/{{index}}" class="list-group-item">
      <h4 class="list-group-item-heading">{{title}}</h4>
      <p class="list-group-item-text">
        {{#if eq type "latex"}}
          LaTeX
        {{else}}
          {{#if eq type "youtube"}}
            <i class="fa fa-youtube-play"></i> YouTube
          {{else}}
            {{truncate content 100}}
          {{/if}}
        {{/if}}
      </p>
    </a>
    {{/each}}
  </div>
</template>

<template name="quizzes">
  <ul class="list-group">
    {{#each sortBy quizzes "title"}}
      <li class="list-group-item">
        <a href="/courses/{{../_id}}/quizzes/{{_id}}">{{title}}</a>
      </li>
    {{/each}}
  </ul>
</template>

<template name="vocabularyQuizzes">
  <ul class="list-group">
    {{#each sortBy vocabularyQuizzes "title"}}
      <li class="list-group-item">
        <a href="/courses/{{../_id}}/vocabularyQuizzes/{{_id}}">{{title}}</a>
      </li>
    {{/each}}
  </ul>
</template>

<template name="studentResources">
  <ul class="list-group">
    {{#each sortBy studentResources "name"}}
      <li class="list-group-item">
        <a href="{{this.url}}">{{this.name}}</a>
        <button type="button" class="btn btn-danger btn-xs pull-right del">Delete</button>
      </li>
    {{/each}}
  </ul>
</template>

<template name="vocabularyQuiz">
  <div class="panel-body">
    <div class="pull-right">
      <button type="button" class="btn btn-sm btn-default reset">Reset</button>
      <button type="button" class="btn btn-sm btn-warning revealAnswers">Reveal Answers</button>
      <a href="/courses/{{_id}}/vocabularyQuizzes/{{quiz._id}}/edit" class="btn btn-sm btn-info">Edit</a>
      <button type="button" class="btn btn-sm btn-danger del">Delete</button>
    </div>
    <h1>{{quiz.title}}</h1>
    {{> accents}}
    <br><br>
    <div class="row vocab-quiz">
      {{#each quiz.questions}}
      <div class="col-xs-6 col-sm-6 col-md-3 col-lg-2">{{question}}</div>
      <input type="text" class="col-xs-6 col-sm-6 col-md-3 col-lg-2" data-answer="{{answer}}">
      {{/each}}
    </div>
  </div>
</template>

<template name="post">
  <div class="panel-body">
    <div class="pull-right">
      <a href="/courses/{{doc._id}}/blog/{{index}}/edit" class="btn btn-sm btn-info">Edit</a>
      <button class="btn btn-sm btn-danger del">Delete</button>
    </div>
    <h1>{{post.title}}</h1>
    {{#if eq post.type "rich"}}
      {{{post.content}}}
    {{else}}
      {{#if eq post.type "latex"}}
      <div class="mathjax">
        $${{post.content}}$$
      </div>
      {{else}}
        <div class="maxi">
          <div class="youtube">
            <iframe src="//www.youtube.com/embed/{{id}}" frameborder="0" allowfullscreen></iframe>
          </div>
        </div>
      {{/if}}
    {{/if}}
  </div>
</template>

<template name="navbar">
  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">Pandora 3.0</a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
          <li class="active"><a href="/">Subjects <span class="sr-only">(current)</span></a></li>
          {{#if admin}}
          <li><a href="#">Clubs</a></li>
          {{/if}}
          <li><a href="/admin">Admin</a></li>
        </ul>
        <form class="navbar-form navbar-left" role="search">
          <div class="form-group">
            <input type="text" class="form-control" placeholder="Search">
          </div>
          <button type="submit" class="btn btn-default">Submit</button>
        </form>
        <ul class="nav navbar-nav navbar-right">
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">{{username}} <span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li><a href="#">Main School Website</a></li>
              <li><a href="#">About Us</a></li>
              <li><a href="#">GitHub</a></li>
              <li class="divider"></li>
              <li><a href="/logout">Sign Out</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </nav>
</template>

<template name="course">
  <div class="main">
    {{> navbar}}

    <div id="st-container" class="container-fluid st-container">

      <!-- content push wrapper -->
      <div class="st-pusher row">

        <nav class="st-menu col-md-3 col-lg-2 col-xl-1" id="menu-1">
          <h2><i class="fa fa-flash"></i> {{doc.title}}
            <br><small>{{doc.icon}}</small>
          </h2>
          <ul>
            <li role="presentation" class="active"><a href="/courses/{{doc._id}}/blog">Blog</a></li>
            <li role="presentation"><a href="/courses/{{doc._id}}/quizzes">Quizzes</a></li>
            <li role="presentation"><a href="/courses/{{doc._id}}/vocabularyQuizzes">Vocabulary Quizzes</a></li>
            <li role="presentation"><a href="/courses/{{doc._id}}/file_uploads">File Uploads</a></li>
            <li role="presentation"><a href="/courses/{{doc._id}}/studentResources">Student Resources</a></li>
            <li role="presentation"><a href="/courses/{{doc._id}}/students">Students</a></li>
            <li role="presentation"><a href="/courses/{{doc._id}}/random_name_generator">Random Name Generator</a></li>
          </ul>
        </nav>

        <div class="st-content col-md-9 col-lg-10  col-xl-11"><!-- this is the wrapper for the content -->
          <div class="st-content-inner"><!-- extra div for emulating position:fixed of the menu -->
            <div class="panel panel-primary">
              <div class="panel-heading">
                <h3 class="panel-title">
                  {{titleCase section}}
                </h3>
                <div class="pull-right">
                  {{#if eq section "studentResources"}}
                    <a class="uploadFile" href="#"><i class="fa fa-plus"></i></a>
                  {{else}}
                    <a href="/courses/{{doc._id}}/{{section}}/new"><i class="fa fa-plus"></i></a>
                  {{/if}}
                </div>
              </div>
              {{> yield}}
            </div>
          </div><!-- /st-content-inner -->
        </div><!-- /st-content -->

      </div><!-- /st-pusher -->
    </div>
  </div>
</template>

<template name="insertPost">
  <form class="panel-body">
    <fieldset>
      <legend>{{#if post.postId}}Edit{{else}}Create{{/if}} Post</legend>
      <div class="form-group">
        <label for="title">Title</label>
        <input type="text" class="form-control" value="{{post.title}}" id="title" placeholder="Title">
      </div>
      <div class="form-group">
        <label for="options">Type</label>
        <select id="options" name="type" class="form-control">
          {{#if eq type "rich"}}
            <option selected value="rich">Rich Text Editor</option>
            <option value="latex">LaTeX</option>
            <option value="youtube">YouTube</option>
          {{else}}
            <option value="rich">Rich Text Editor</option>
            {{#if eq type "latex"}}
            <option selected value="latex">LaTeX</option>
            <option value="youtube">YouTube</option>
            {{else}}
            <option value="latex">LaTeX</option>
            <option selected value="youtube">YouTube</option>
            {{/if}}
          {{/if}}
        </select>
      </div>
      <div class="form-group">
        <label>Content</label>
        {{#if eq type "rich"}}
        <div>
          <textarea class="form-control" rows="6" id="editor">{{post.content}}</textarea>
        </div>
        {{else}}
          {{#if eq type "latex"}}
            <textarea class="form-control" name="content" rows="6">{{post.content}}</textarea>
          {{else}}
            <input class="form-control" name="content" type="text" placeholder="Video URL" value="{{post.content}}">
          {{/if}}
        {{/if}}
      </div>
    </fieldset>
    <button type="submit" class="btn btn-primary">Submit</button>
  </form>
</template>

<template name="vocabularyQuestion">
  <div class="row question">
    <div class="col-md-11">
      <div class="row">
        <div class="col-md-6">
          <input class="form-control part-q" value="{{question}}" placeholder="Question" type="text">
        </div>
        <div class="col-md-6">
          <input class="form-control part-a" value="{{answer}}" placeholder="Answer" type="text">
        </div>
      </div>
    </div>
    <div class="col-md-1">
      <button type="button" class="btn handle btn-sm btn-default"><i class="fa fa-bars"></i></button>
      <button type="button" class="del btn btn-sm btn-danger"><i class="fa fa-times"></i></button>
    </div>
  </div>
</template>

<template name="accents">
  <button type="button" class="accent btn btn-sm btn-info">&aacute;</button>
  <button type="button" class="accent btn btn-sm btn-info">&agrave;</button>
  <button type="button" class="accent btn btn-sm btn-info">&auml;</button>
  <button type="button" class="accent btn btn-sm btn-info">&eacute; </button>
  <button type="button" class="accent btn btn-sm btn-info">&egrave;</button>
  <button type="button" class="accent btn btn-sm btn-info">&ecirc;</button>
  <button type="button" class="accent btn btn-sm btn-info">&euml;</button>
  <button type="button" class="accent btn btn-sm btn-info">&iuml;</button>
  <button type="button" class="accent btn btn-sm btn-info">&ouml;</button>
  <button type="button" class="accent btn btn-sm btn-info">&uuml;</button>
</template>

<template name="insertVocabularyQuiz">
  <form class="panel-body">
    <fieldset>
      <legend>Create Vocabulary Quiz</legend>
      <div class="form-group">
        <label for="title">Title</label>
        <input type="text" class="form-control" id="title" value="{{quiz.title}}" placeholder="Title">
      </div>
      <div class="form-group questions">
        <label>Questions</label>
        <br>
        {{> accents}}
        <div class="row">
          <div class="col-md-12">
            <button type="button" class="addQuestion btn btn-sm btn-default">Add</button>
          </div>
        </div>
      </div>
    </fieldset>
    <button type="submit" class="btn btn-primary">Submit</button>
  </form>
</template>

<template name="optionForm">
  <div class="input-group option">
    {{#if eq type "radio"}}
      <span class="input-group-addon">
        <input type="radio" name="option{{no}}" class="correct">
      </span>
    {{/if}}
    {{#if eq type "checkbox"}}
    <span class="input-group-addon">
      <input type="checkbox" name="option{{no}}" class="correct">
    </span>
    {{/if}}
    {{#if eq type "number"}}
      <input type="number" class="form-control title">
    {{else}}
      <input type="text" class="form-control title">
    {{/if}}
    <span class="input-group-addon">
      <a class="del"><i class="fa fa-times"></i></a>
    </span>
  </div>
</template>

<template name="questionForm">
    <div class="panel panel-default">
      <div class="panel-heading" role="tab" id="heading{{no}}">
        <h4 class="panel-title">
          <a data-toggle="collapse" data-parent="#accordion" href="#collapse{{no}}" class="collapsed" aria-expanded="false" aria-controls="collapse{{no}}">
            Question
          </a>
          <button class="btn btn-xs btn-default pull-right handle" type="button"><i class="fa fa-bars"></i></button>
        </h4>
      </div>
      <div id="collapse{{no}}" class="panel-collapse collapse" role="tabpanel" aria-expaned="false" aria-labelledby="heading{{no}}">
        <div class="panel-body">
          <div class="form-group">
            <label>Question</label>
            <textarea name="question" class="editor form-control"></textarea>
          </div>
          <div class="form-group">
            <label>Type</label>
            <select name="type" class="type form-control">
              <option value="string">Text</option>
              <option value="number">Number</option>
              <option value="radio">Multiple Choice</option>
              <option value="checkbox">Checkboxes</option>
            </select>
          </div>
          <div class="form-group options">
            {{#if eq type "string"}}
              <label>All Correct Answers</label>
              {{else}}
              {{#if eq type "number"}}
                <label>All Correct Answers</label>
              {{/if}}
            {{/if}}
            <button type="button" class="btn btn-default btn-sm addOption">Add</button>
            <button type="button" class="btn btn-danger btn-sm del">Delete Question</button>
          </div>
        </div>
      </div>
    </div>
</template>

<template name="quizForm">
  <div class="panel-body">
    <form>
      <fieldset>
        <legend>Create Quiz</legend>
        <div class="form-group">
          <label>Title</label>
          <input class="form-control" name="title" type="text" placeholder="Title">
        </div>
        <div class="form-group">
          <label>Questions</label>
          <div class="panel-group questions" id="accordion" role="tablist" aria-multiselectable="true">
          </div>
          <button type="button" class="btn btn-default addQuestion">Add Question</button>
          <button type="sumbit" class="btn btn-primary">Submit</button>
        </div>
      </fieldset>
    </form>
  </div>
</template>

<template name="fileUpload">
  <div class="modal fade">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">File Upload(s) In Progress</h4>
        </div>
        <div class="modal-body">
          {{#each files}}
              {{#with FS.GetFile "files" this}}
                <h4>{{this.name}}</h4>
                {{> FS.UploadProgressBar bootstrap=true class='progress-bar-success progress-bar-striped active' showPercent=true}}
              {{/with}}
          {{/each}}
        </div>
        <div class="modal-footer">
          {{#if finished}}
            <button type="button" class="btn btn-default" data-dismiss="modal">Okay</button>
          {{else}}
            <button type="button" class="btn btn-danger abort">Abort</button>
          {{/if}}
        </div>
      </div>
    </div>
  </div>
</template>
