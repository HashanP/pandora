<template name="assignment">
	{{>navigation}}
	<div class="container">
		<div class="col-md-3">
			{{>noticeNav}}
		</div>
		<div class="col-md-9">
			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">
						Upload
						<div class="pull-right">
							<a href="/rooms/{{_id}}"><i class="fa fa-times"></i></a>
						</div>
					</h3>
				</div>
				<div class="panel-body">
					<table class="table">
						<thead>
							<tr>
								<th>User</th>
								<th>Files</th>
								<th>Feedback</th>
							</tr>
						</thead>
						<tbody>
						{{#if uploads}}
							{{#each uploads}}
								<tr>
									<td>{{username2 userId}}</td>
									<td>
										{{#each files}}
											{{#with FS.GetFile "files" .}}
												<a href="{{this.url}}">{{this.name}}</a><br>
											{{/with}}
										{{/each}}
									</td>
									<td>
										{{#if feedback}}
											<button class="btn btn-default btn-sm open-feedback">Change</button>
										{{else}}
											<button class="btn btn-default btn-sm open-feedback">Give</button>
										{{/if}}
									</td>
								</tr>
							{{/each}}
						{{else}}
							Nobody has uploaded anything yet.
						{{/if}}
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
</template>

<template name="feedback">
	<div class="modal fade">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h4 class="modal-title">Feedback</h4>
				</div>
				<div class="modal-body">
					<div class="form-group">
						<label>Grade</label>
						<input type="text" value="{{grade}}" class="form-control grade">
					</div>
					<div class="form-group">
						<label>Comment</label>
						<textarea class="form-control comment">{{comment}}</textarea>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary save">Save</button>
				</div>
			</div>
		</div>
	</div>
</template>

<template name="noticeNav">
	<div class="panel panel-default">
		<div class="panel-heading">
			Upcoming
		</div>
		{{#if eq events.length 0}}
			<div class="panel-body">
				There is nothing upcoming.
			</div>
		{{/if}}
		<ul class="list-group">
			{{#each events}}
				<li class="list-group-item">
					{{text}}<br>
					<span class="info">
						{{#if eq type "reminder"}}
							{{fullDate eventDate}}
						{{else}}
							Due on {{fullDate deadline}}
						{{/if}}
					</span>
				</li>
			{{/each}}
		</ul>
	</div>
</template>
